var ACF_OSM_Map_Loader=function(){function e(){this.init()}var r=e.prototype;return r.init=function(){var r=this;this.renderMaps(),document.querySelectorAll("joomla-field-subform").forEach(function(e){e.addEventListener("subform-row-add",function(e){r.setup(r.getElements(e.detail.row),e.detail.row),r.initInstances(r.getElements(e.detail.row))})})},r.initInstances=function(e){var r=this;e.forEach(function(e){r.renderMapItem(e)})},r.setup=function(e,n){e.forEach(function(e){var r=n.dataset.group.replace("row","");e.setAttribute("id",e.id.replace("__rowX__","__row"+r+"__"));var t=e.querySelector(".osm_map_item.nr-address-map");t.setAttribute("id",t.id.replace("__rowX__","__row"+r+"__"))})},r.renderMapItem=function(e){var r=e.getAttribute("data-backend");r="1"==r,this.renderMap(e,r)},r.renderMaps=function(){var t=this;!function(){if(window.IntersectionObserver){var r=new IntersectionObserver(function(e,r){e.forEach(function(e){e.isIntersecting&&(t.renderMapItem(e.target),r.unobserve(e.target))})},{rootMargin:"0px 0px 0px 0px"});document.querySelectorAll(".nr-address-component.osm").forEach(function(e){r.observe(e)})}}()},r.renderMap=function(e,r){void 0===r&&(r=!1);var t=new ACF_OSM_Map(e);if(!r)return t.render(),t.addMarker(),void t.addMarkerPopup();if(t.render(),t.addMarker(),t.getGeocoderStatus()){if(t.addGeocoder(),"1"==e.getAttribute("data-disabled"))return;t.handleGeocoderEvent(),t.handleGeocoderAddressUpdate()}"1"!=e.getAttribute("data-disabled")&&(t.handleClearButton(),t.onMarkerDrag(),t.onMapClickUpdateMarker())},r.getElements=function(e){return void 0===e&&(e=""),(e=""==e?document:e).querySelectorAll(".nr-address-component.osm")},e}();window.addEventListener("load",function(){new ACF_OSM_Map_Loader});

