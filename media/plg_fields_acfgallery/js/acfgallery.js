var ACF_Gallery_Init=function(){function e(){"undefined"!=typeof Dropzone&&this.init()}var t=e.prototype;return t.init=function(){var t=this;document.querySelectorAll("joomla-field-subform").forEach(function(e){e.addEventListener("subform-row-add",function(e){t.setup(t.getElements(e.detail.row),e.detail.row),t.initInstances(t.getElements(e.detail.row))})})},t.setup=function(e,t){var r=this;e.forEach(function(e){r.initMediaLibraryModal(e),r.updateAttributes(e,t)})},t.initInstances=function(e){e.forEach(function(e){new TF_Gallery_Manager(e).init()})},t.updateAttributes=function(e,t){var r=t.dataset.group.replace("row","");e.setAttribute("class",e.getAttribute("class").replace("__rowX__","__row"+r+"__"));var o=e.querySelector(".media_uploader_file");o.setAttribute("id",o.id.replace("__rowX__","__row"+r+"__"));var a=e.querySelector(".tf-gallery-dz");a.setAttribute("data-inputname",a.getAttribute("data-inputname").replace("[rowX]","[row"+r+"]"));var n=e.querySelector("template.previewTemplate"),i=n.content.querySelector('input[type="checkbox"]');i.setAttribute("id",i.id.replace("[rowX]","[row"+r+"]"));var u=n.content.querySelector("label");u.setAttribute("for",u.getAttribute("for").replace("[rowX]","[row"+r+"]"));var l=n.content.querySelector("textarea");l.setAttribute("name",l.getAttribute("name").replace("[rowX]","[row"+r+"]"));var c=n.content.querySelector("input.item-thumbnail");c.setAttribute("name",c.getAttribute("name").replace("[rowX]","[row"+r+"]"))},t.initMediaLibraryModal=function(e){var t=e.querySelector(":scope > .modal"),r=Joomla.getOptions("bootstrap.modal")["#"+t.id],o={backdrop:!r.backdrop||r.backdrop,keyboard:!r.keyboard||r.keyboard,focus:!r.focus||r.focus};Joomla.initialiseModal(t,o)},t.getElements=function(e){return void 0===e&&(e=""),(e=""==e?document:e).querySelectorAll(".tf-gallery-manager")},e}();document.addEventListener("DOMContentLoaded",function(e){new ACF_Gallery_Init});

